import{t as S,e as C,a as M}from"../chunks/BCv-PhoZ.js";import{au as N,p as z,t as F,J as h,a as O,c as i,s as f,af as R,r as c,D as w,ag as J}from"../chunks/BHJITWWH.js";import{r as T}from"../chunks/CBxgTVEl.js";import{s as u,c as b}from"../chunks/1ww8kltg.js";import{a as W}from"../chunks/BDDvr1-m.js";import{t as k}from"../chunks/AdmevC4f.js";import{g as y}from"../chunks/Cthip-ge.js";import{i as Y,A as q}from"../chunks/D-zHGvuz.js";import{h as B,a as E}from"../chunks/C3JyOOO9.js";import{c as G,a as U}from"../chunks/D08HmYVE.js";import{L as H}from"../chunks/BxOkwtCs.js";const K=({url:r})=>{let e=r.searchParams.get("next");return e===null&&(e="/"),{nextUrl:e}},le=Object.freeze(Object.defineProperty({__proto__:null,load:K},Symbol.toStringTag,{value:"Module"}));function g(r){U({text:r,position:"bottom-right",type:"error",removeAfter:5e3})}async function Q(r,e){G();const o=new FormData(r.target),n=o.get("remember")||!1;let s;try{s=await Y.postForm("/token/",o),B(s.data,n)}catch(t){if(!(t instanceof q))throw t;if(t.response===void 0)throw g(t.message),t;V(t.response);return}const p=await E(),m=e.startsWith("/admin");(p==null?void 0:p.is_staff)&&m||!m?await y(e):await y("/problems")}function V({status:r,data:e}){if(r===401){g("Error: Username or password doesn't match.");return}const{username:o,password:n}=e;n&&g("Password error: "+n.join(`
`)),o&&g("Username error: "+o.join(`
`))}async function X(r){const e=await E();e!==void 0&&(U({text:`You are logged in as user: ${e.username}`,position:"bottom-center",removeAfter:5e3}),await y(r))}function Z(r="/"){N(async()=>await X(r))}var $=S(`<main class="flex h-screen max-h-screen items-center justify-center bg-gray-50"><div class="m-10 flex rounded-xl border bg-white p-8 shadow"><div class="mr-8 space-y-2 border-r pr-8"><div class="flex h-16 items-center space-x-4"><!></div> <h1 class="text-2xl font-bold">Login</h1> <p>Sign in to your account</p></div> <form class="my-3 flex flex-col space-y-4"><input type="text" placeholder="Username" name="username"> <input type="password" placeholder="Password" name="password"> <label class="relative items-center ps-[24px]"><input type="checkbox" name="remember"> <span></span> Remember me</label> <div class="flex flex-col space-y-3"><p>Doesn't have a account? <a class="font-bold text-blue-700 hover:text-blue-600" href="/register">Register</a></p> <button type="submit" class="rounded-full bg-red-600 p-2 px-5 pb-[0.44rem] font-bold text-white transition-colors duration-200 hover:bg-red-500">Login</button></div></form></div></main>`);function de(r,e){z(e,!0);const{nextUrl:o}=e.data;function n(a){a.preventDefault(),Q(a,o)}Z(o);let s=R(!1);function p(){let a="hover:border-none hover:bg-red-300";return h(s)&&(a="bg-red-600 hover:bg-red-500 border-none"),k("absolute left-0 top-[2px] size-5 rounded appearance-none","border border-gray-300 bg-gray-200 transition-color",a)}const m="rounded border bg-gray-50 p-2 px-3";var l=$(),t=i(l),v=i(t),_=i(v),j=i(_);H(j),c(_),w(4),c(v);var x=f(v,2),A=i(x);u(A,1,b(m));var L=f(A,2);u(L,1,b(m));var P=f(L,2),d=i(P);T(d);var D=f(d,2);w(),c(P),w(2),c(x),c(t),c(l),F((a,I)=>{u(d,1,a),u(D,1,I)},[()=>b(p()),()=>b(k("absolute top-[4.5px] left-[6.5px] h-[12px] w-[7px] transition-opacity","rotate-45 border-r-[3px] border-b-[3px] border-transparent",h(s)&&"border-white"))]),C("submit",x,n),W(d,()=>h(s),a=>J(s,a)),M(r,l),O()}export{de as component,le as universal};
